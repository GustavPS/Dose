{"ast":null,"code":"var _jsxFileName = \"/mnt/h/Code/Dose/Main Server/components/serverBox.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport style from './serverBox.module.css';\nimport { useRef } from 'react';\nexport default class ServerBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.imgRef = React.createRef();\n    this.serverName = props.name;\n    this.serverAdress = props.adress;\n    this.checkStatus();\n  }\n\n  fetchWithTimeout(url, options, timeout = 5000) {\n    return Promise.race([fetch(url, options), new Promise((_, reject) => setTimeout(() => reject(new Error('timeout')), timeout))]);\n  }\n\n  checkStatus() {\n    this.fetchWithTimeout(`${this.serverAdress}/api/ping`, {}, 5000).then(res => {\n      // check so that the server we are pinging is responding to the request\n      if (res.status == 200) {\n        this.imgRef.current.classList.add(style.statusSuccess);\n      } else {\n        this.imgRef.current.classList.add(style.statusError);\n      }\n    }).catch(e => {\n      this.imgRef.current.classList.add(style.statusError);\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      onClick: this.props.onClick,\n      className: style.server,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, __jsx(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }, this.serverName), __jsx(\"div\", {\n      className: style.statusBox,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, __jsx(\"img\", {\n      ref: this.imgRef,\n      className: style.statusImage,\n      width: \"40\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }\n    })), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    }, this.serverAdress));\n  }\n\n}","map":{"version":3,"sources":["/mnt/h/Code/Dose/Main Server/components/serverBox.js"],"names":["style","useRef","ServerBox","React","Component","constructor","props","imgRef","createRef","serverName","name","serverAdress","adress","checkStatus","fetchWithTimeout","url","options","timeout","Promise","race","fetch","_","reject","setTimeout","Error","then","res","status","current","classList","add","statusSuccess","statusError","catch","e","render","onClick","server","statusBox","statusImage"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,wBAAlB;AACA,SAASC,MAAT,QAAuB,OAAvB;AAGA,eAAe,MAAMC,SAAN,SAAwBC,KAAK,CAACC,SAA9B,CAAwC;AACnDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,MAAL,GAAcJ,KAAK,CAACK,SAAN,EAAd;AAGA,SAAKC,UAAL,GAAkBH,KAAK,CAACI,IAAxB;AACA,SAAKC,YAAL,GAAoBL,KAAK,CAACM,MAA1B;AACA,SAAKC,WAAL;AACH;;AAEDC,EAAAA,gBAAgB,CAACC,GAAD,EAAMC,OAAN,EAAeC,OAAO,GAAG,IAAzB,EAA+B;AAC3C,WAAOC,OAAO,CAACC,IAAR,CAAa,CAChBC,KAAK,CAACL,GAAD,EAAMC,OAAN,CADW,EAEhB,IAAIE,OAAJ,CAAY,CAACG,CAAD,EAAIC,MAAJ,KAAeC,UAAU,CAAC,MAAMD,MAAM,CAAC,IAAIE,KAAJ,CAAU,SAAV,CAAD,CAAb,EAAqCP,OAArC,CAArC,CAFgB,CAAb,CAAP;AAIH;;AAEDJ,EAAAA,WAAW,GAAG;AACV,SAAKC,gBAAL,CAAuB,GAAE,KAAKH,YAAa,WAA3C,EAAuD,EAAvD,EAA2D,IAA3D,EACCc,IADD,CACOC,GAAD,IAAS;AACX;AACA,UAAGA,GAAG,CAACC,MAAJ,IAAc,GAAjB,EAAsB;AAClB,aAAKpB,MAAL,CAAYqB,OAAZ,CAAoBC,SAApB,CAA8BC,GAA9B,CAAkC9B,KAAK,CAAC+B,aAAxC;AACH,OAFD,MAEO;AACH,aAAKxB,MAAL,CAAYqB,OAAZ,CAAoBC,SAApB,CAA8BC,GAA9B,CAAkC9B,KAAK,CAACgC,WAAxC;AACH;AACJ,KARD,EASCC,KATD,CASOC,CAAC,IAAI;AACR,WAAK3B,MAAL,CAAYqB,OAAZ,CAAoBC,SAApB,CAA8BC,GAA9B,CAAkC9B,KAAK,CAACgC,WAAxC;AACH,KAXD;AAYH;;AAEDG,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,OAAO,EAAE,KAAK7B,KAAL,CAAW8B,OAAzB;AAAkC,MAAA,SAAS,EAAEpC,KAAK,CAACqC,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAK5B,UAAV,CADJ,EAEI;AAAK,MAAA,SAAS,EAAET,KAAK,CAACsC,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,GAAG,EAAE,KAAK/B,MAAf;AAAuB,MAAA,SAAS,EAAEP,KAAK,CAACuC,WAAxC;AAAqD,MAAA,KAAK,EAAC,IAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAK5B,YAAT,CALJ,CADJ;AASH;;AA3CkD","sourcesContent":["import style from './serverBox.module.css';\r\nimport { useRef } from 'react';\r\n\r\n\r\nexport default class ServerBox extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.imgRef = React.createRef();\r\n\r\n\r\n        this.serverName = props.name;\r\n        this.serverAdress = props.adress;\r\n        this.checkStatus();\r\n    }\r\n\r\n    fetchWithTimeout(url, options, timeout = 5000) {\r\n        return Promise.race([\r\n            fetch(url, options),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('timeout')), timeout))\r\n        ]);\r\n    }\r\n\r\n    checkStatus() {\r\n        this.fetchWithTimeout(`${this.serverAdress}/api/ping`, {}, 5000)    \r\n        .then((res) => {\r\n            // check so that the server we are pinging is responding to the request\r\n            if(res.status == 200) {\r\n                this.imgRef.current.classList.add(style.statusSuccess);\r\n            } else {\r\n                this.imgRef.current.classList.add(style.statusError);\r\n            }\r\n        })\r\n        .catch(e => {\r\n            this.imgRef.current.classList.add(style.statusError);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div onClick={this.props.onClick} className={style.server}>\r\n                <h5>{this.serverName}</h5>\r\n                <div className={style.statusBox}>\r\n                    <img ref={this.imgRef} className={style.statusImage} width=\"40\"/>\r\n                </div>\r\n                <p>{this.serverAdress}</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}