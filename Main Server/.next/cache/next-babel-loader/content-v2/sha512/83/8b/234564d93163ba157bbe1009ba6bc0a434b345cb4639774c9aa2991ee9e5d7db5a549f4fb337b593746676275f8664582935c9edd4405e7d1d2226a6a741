{"ast":null,"code":"import _classCallCheck from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/mnt/h/Code/Dose/Main Server/components/serverBox.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport style from './serverBox.module.css';\nimport { useRef } from 'react';\n\nvar ServerBox = /*#__PURE__*/function (_React$Component) {\n  _inherits(ServerBox, _React$Component);\n\n  var _super = _createSuper(ServerBox);\n\n  function ServerBox(props) {\n    var _this;\n\n    _classCallCheck(this, ServerBox);\n\n    _this = _super.call(this, props);\n    _this.imgRef = React.createRef();\n    _this.serverName = props.name;\n    _this.serverAdress = props.adress;\n\n    _this.checkStatus();\n\n    return _this;\n  }\n\n  _createClass(ServerBox, [{\n    key: \"fetchWithTimeout\",\n    value: function fetchWithTimeout(url, options) {\n      var timeout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5000;\n      return Promise.race([fetch(url, options), new Promise(function (_, reject) {\n        return setTimeout(function () {\n          return reject(new Error('timeout'));\n        }, timeout);\n      })]);\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus() {\n      var _this2 = this;\n\n      this.fetchWithTimeout(\"\".concat(this.serverAdress, \"/api/ping\"), {}, 5000).then(function (res) {\n        // check so that the server we are pinging is responding to the request\n        if (res.status == 200) {\n          _this2.imgRef.current.classList.add(style.statusSuccess);\n        } else {\n          _this2.imgRef.current.classList.add(style.statusError);\n        }\n      })[\"catch\"](function (e) {\n        _this2.imgRef.current.classList.add(style.statusError);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        onClick: this.props.onClick,\n        className: style.server,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }\n      }, __jsx(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 17\n        }\n      }, this.serverName), __jsx(\"div\", {\n        className: style.statusBox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 17\n        }\n      }, __jsx(\"img\", {\n        ref: this.imgRef,\n        className: style.statusImage,\n        width: \"40\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }\n      })), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 17\n        }\n      }, this.serverAdress));\n    }\n  }]);\n\n  return ServerBox;\n}(React.Component);\n\nexport { ServerBox as default };","map":{"version":3,"sources":["/mnt/h/Code/Dose/Main Server/components/serverBox.js"],"names":["style","useRef","ServerBox","props","imgRef","React","createRef","serverName","name","serverAdress","adress","checkStatus","url","options","timeout","Promise","race","fetch","_","reject","setTimeout","Error","fetchWithTimeout","then","res","status","current","classList","add","statusSuccess","statusError","e","onClick","server","statusBox","statusImage","Component"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,wBAAlB;AACA,SAASC,MAAT,QAAuB,OAAvB;;IAGqBC,S;;;;;AACjB,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;AACA,UAAKC,MAAL,GAAcC,KAAK,CAACC,SAAN,EAAd;AAGA,UAAKC,UAAL,GAAkBJ,KAAK,CAACK,IAAxB;AACA,UAAKC,YAAL,GAAoBN,KAAK,CAACO,MAA1B;;AACA,UAAKC,WAAL;;AAPe;AAQlB;;;;qCAEgBC,G,EAAKC,O,EAAyB;AAAA,UAAhBC,OAAgB,uEAAN,IAAM;AAC3C,aAAOC,OAAO,CAACC,IAAR,CAAa,CAChBC,KAAK,CAACL,GAAD,EAAMC,OAAN,CADW,EAEhB,IAAIE,OAAJ,CAAY,UAACG,CAAD,EAAIC,MAAJ;AAAA,eAAeC,UAAU,CAAC;AAAA,iBAAMD,MAAM,CAAC,IAAIE,KAAJ,CAAU,SAAV,CAAD,CAAZ;AAAA,SAAD,EAAqCP,OAArC,CAAzB;AAAA,OAAZ,CAFgB,CAAb,CAAP;AAIH;;;kCAEa;AAAA;;AACV,WAAKQ,gBAAL,WAAyB,KAAKb,YAA9B,gBAAuD,EAAvD,EAA2D,IAA3D,EACCc,IADD,CACM,UAACC,GAAD,EAAS;AACX;AACA,YAAGA,GAAG,CAACC,MAAJ,IAAc,GAAjB,EAAsB;AAClB,UAAA,MAAI,CAACrB,MAAL,CAAYsB,OAAZ,CAAoBC,SAApB,CAA8BC,GAA9B,CAAkC5B,KAAK,CAAC6B,aAAxC;AACH,SAFD,MAEO;AACH,UAAA,MAAI,CAACzB,MAAL,CAAYsB,OAAZ,CAAoBC,SAApB,CAA8BC,GAA9B,CAAkC5B,KAAK,CAAC8B,WAAxC;AACH;AACJ,OARD,WASO,UAAAC,CAAC,EAAI;AACR,QAAA,MAAI,CAAC3B,MAAL,CAAYsB,OAAZ,CAAoBC,SAApB,CAA8BC,GAA9B,CAAkC5B,KAAK,CAAC8B,WAAxC;AACH,OAXD;AAYH;;;6BAEQ;AACL,aACI;AAAK,QAAA,OAAO,EAAE,KAAK3B,KAAL,CAAW6B,OAAzB;AAAkC,QAAA,SAAS,EAAEhC,KAAK,CAACiC,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAK1B,UAAV,CADJ,EAEI;AAAK,QAAA,SAAS,EAAEP,KAAK,CAACkC,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAE,KAAK9B,MAAf;AAAuB,QAAA,SAAS,EAAEJ,KAAK,CAACmC,WAAxC;AAAqD,QAAA,KAAK,EAAC,IAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAFJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAK1B,YAAT,CALJ,CADJ;AASH;;;;EA3CkCJ,KAAK,CAAC+B,S;;SAAxBlC,S","sourcesContent":["import style from './serverBox.module.css';\r\nimport { useRef } from 'react';\r\n\r\n\r\nexport default class ServerBox extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.imgRef = React.createRef();\r\n\r\n\r\n        this.serverName = props.name;\r\n        this.serverAdress = props.adress;\r\n        this.checkStatus();\r\n    }\r\n\r\n    fetchWithTimeout(url, options, timeout = 5000) {\r\n        return Promise.race([\r\n            fetch(url, options),\r\n            new Promise((_, reject) => setTimeout(() => reject(new Error('timeout')), timeout))\r\n        ]);\r\n    }\r\n\r\n    checkStatus() {\r\n        this.fetchWithTimeout(`${this.serverAdress}/api/ping`, {}, 5000)    \r\n        .then((res) => {\r\n            // check so that the server we are pinging is responding to the request\r\n            if(res.status == 200) {\r\n                this.imgRef.current.classList.add(style.statusSuccess);\r\n            } else {\r\n                this.imgRef.current.classList.add(style.statusError);\r\n            }\r\n        })\r\n        .catch(e => {\r\n            this.imgRef.current.classList.add(style.statusError);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div onClick={this.props.onClick} className={style.server}>\r\n                <h5>{this.serverName}</h5>\r\n                <div className={style.statusBox}>\r\n                    <img ref={this.imgRef} className={style.statusImage} width=\"40\"/>\r\n                </div>\r\n                <p>{this.serverAdress}</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}