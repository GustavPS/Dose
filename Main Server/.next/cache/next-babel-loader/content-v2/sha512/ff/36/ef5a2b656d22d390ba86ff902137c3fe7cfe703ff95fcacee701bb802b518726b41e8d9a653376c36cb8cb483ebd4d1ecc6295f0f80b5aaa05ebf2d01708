{"ast":null,"code":"import _classCallCheck from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/h/Code/Dose/Main Server/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/mnt/h/Code/Dose/Main Server/components/movieBackdrop.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport style from './movieBackdrop.module.css';\nimport validateServerAccess from '../lib/validateServerAccess';\n\nvar MovieBackdrop = /*#__PURE__*/function (_React$Component) {\n  _inherits(MovieBackdrop, _React$Component);\n\n  var _super = _createSuper(MovieBackdrop);\n\n  function MovieBackdrop(props) {\n    var _this;\n\n    _classCallCheck(this, MovieBackdrop);\n\n    _this = _super.call(this, props);\n    _this.title = props.title;\n    _this.overview = props.overview;\n    _this.poster = props.poster;\n    _this.runtime = props.runtime;\n    _this.backdrop = props.backdrop;\n    _this.id = props.id;\n    _this.time = props.time ? props.time : null;\n    _this.runtime = props.runtime ? props.runtime : null;\n    _this.markAsDoneButton = props.markAsDoneButton;\n    _this.showTitle = props.showTitle;\n    _this.multipleRows = props.multipleRows ? props.multipleRows : null;\n    _this.markAsWatched = _this.markAsWatched.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(MovieBackdrop, [{\n    key: \"markAsWatched\",\n    value: function markAsWatched() {\n      var _this2 = this;\n\n      validateServerAccess(server, function (serverToken) {\n        fetch(\"\".concat(server.server_ip, \"/api/movies/\").concat(id, \"/setWatched?watched=true&token=\").concat(serverToken)).then(function (r) {\n          return r.json();\n        }).then(function (status) {\n          if (status.success) {\n            _this2.props.unMountMe();\n          } else {\n            console.log(\"ERROR MARKING AS WATCHED: \" + status);\n          }\n        })[\"catch\"](function (err) {\n          console.log(err);\n        });\n      });\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      if (this.showTitle) {\n        return {\n          opacity: '1'\n        };\n      } else {\n        return {};\n      }\n    }\n  }, {\n    key: \"getBackdropStyle\",\n    value: function getBackdropStyle() {\n      var style = {\n        backgroundImage: \"url('\".concat(this.backdrop, \"')\")\n      };\n\n      if (this.multipleRows) {\n        style.marginBottom = \"20px\";\n        style.width = \"445px\";\n      }\n\n      return style;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return __jsx(\"div\", {\n        onClick: function onClick() {\n          return _this3.props.onClick(_this3.id);\n        },\n        className: style.backdrop,\n        style: this.getBackdropStyle(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }\n      }, __jsx(\"h3\", {\n        className: style.title,\n        style: this.getStyle(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }\n      }, this.title), __jsx(\"p\", {\n        className: style.overview,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }\n      }, this.overview.substring(0, 150), this.overview.length > 150 ? '...' : ''), this.time != null && this.runtime != null && __jsx(\"progress\", {\n        className: style.progress,\n        value: this.time,\n        max: this.runtime,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }\n      }));\n    }\n  }]);\n\n  return MovieBackdrop;\n}(React.Component);\n\nexport { MovieBackdrop as default };","map":{"version":3,"sources":["/mnt/h/Code/Dose/Main Server/components/movieBackdrop.js"],"names":["style","validateServerAccess","MovieBackdrop","props","title","overview","poster","runtime","backdrop","id","time","markAsDoneButton","showTitle","multipleRows","markAsWatched","bind","server","serverToken","fetch","server_ip","then","r","json","status","success","unMountMe","console","log","err","opacity","backgroundImage","marginBottom","width","onClick","getBackdropStyle","getStyle","substring","length","progress","React","Component"],"mappings":"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","sourcesContent":["import style from './movieBackdrop.module.css';\r\nimport validateServerAccess from '../lib/validateServerAccess';\r\n\r\n\r\nexport default class MovieBackdrop extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.title = props.title;\r\n        this.overview = props.overview;\r\n        this.poster = props.poster\r\n        this.runtime = props.runtime;\r\n        this.backdrop = props.backdrop;\r\n        this.id = props.id;\r\n        this.time = props.time ? props.time : null;\r\n        this.runtime = props.runtime ? props.runtime : null;\r\n        this.markAsDoneButton = props.markAsDoneButton;\r\n        this.showTitle = props.showTitle;\r\n        this.multipleRows = props.multipleRows ? props.multipleRows : null;\r\n\r\n        this.markAsWatched = this.markAsWatched.bind(this);\r\n    }\r\n\r\n    markAsWatched() {\r\n        validateServerAccess(server, (serverToken) => {\r\n            fetch(`${server.server_ip}/api/movies/${id}/setWatched?watched=true&token=${serverToken}`)\r\n            .then(r => r.json())\r\n            .then(status => {\r\n                if (status.success) {\r\n                    this.props.unMountMe();\r\n                } else {\r\n                    console.log(\"ERROR MARKING AS WATCHED: \" + status);\r\n                }\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n        });\r\n    }\r\n\r\n    getStyle() {\r\n        if (this.showTitle) {\r\n            return {opacity: '1'};\r\n        } else {\r\n            return {};\r\n        }\r\n    }\r\n\r\n    getBackdropStyle() {\r\n        let style = {\r\n            backgroundImage: `url('${this.backdrop}')`\r\n        }\r\n        if (this.multipleRows) {\r\n            style.marginBottom = \"20px\";\r\n            style.width = \"445px\";\r\n        }\r\n        return style;\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div onClick={() => this.props.onClick(this.id)} className={style.backdrop} style={this.getBackdropStyle()}>\r\n                <h3 className={style.title} style={this.getStyle()}>{this.title}</h3>\r\n                <p className={style.overview}>\r\n                    {this.overview.substring(0, 150)}{this.overview.length > 150 ? '...' : ''}\r\n                </p>\r\n                {this.time != null && this.runtime != null &&\r\n                    <progress className={style.progress} value={this.time} max={this.runtime}></progress>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}