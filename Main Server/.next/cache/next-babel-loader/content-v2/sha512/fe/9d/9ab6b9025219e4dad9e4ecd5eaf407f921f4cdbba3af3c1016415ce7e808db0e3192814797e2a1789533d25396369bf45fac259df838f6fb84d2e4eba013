{"ast":null,"code":"var _jsxFileName = \"/mnt/h/Code/Dose/Main Server/pages/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport Layout from '../components/layout';\nimport style from '../styles/index.module.css';\nimport useSWR from 'swr';\nimport ServerBox from '../components/serverBox';\nimport Router from 'next/router';\nimport cookie from 'js-cookie'; // Fetcher for useSWR, redirect to login if not authorized\n\nvar fetcher = function fetcher(url) {\n  return fetch(url).then(function (r) {\n    return r.json().then(function (result) {\n      console.log(result);\n      console.log(result[\"servers\"].length);\n\n      if (result[\"servers\"].length != 1) {\n        return result;\n      } else {\n        var server = result[\"servers\"][0];\n        cookie.set('server', JSON.stringify({\n          id: server.server_id,\n          name: server.server_name,\n          ip: server.server_ip\n        }));\n        Router.push(\"/server/\".concat(server.server_id));\n      }\n    });\n  });\n};\n\nvar chooseServer = function chooseServer(server) {\n  cookie.set('server', JSON.stringify({\n    id: server.server_id,\n    name: server.server_name,\n    ip: server.server_ip\n  }));\n  Router.push(\"/server/\".concat(server.server_id));\n};\n\nexport default function Home() {\n  _s();\n\n  var _this = this;\n\n  var _useSWR = useSWR(\"\".concat(process.env.NEXT_PUBLIC_SERVER_URL, \"/api/servers/getServers?token=\").concat(cookie.get('token')), fetcher),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  return __jsx(Layout, {\n    home: true,\n    relative: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }), data && data.servers && __jsx(\"div\", {\n    className: style.servers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, data.servers.map(function (server, i) {\n    return __jsx(ServerBox, {\n      onClick: function onClick() {\n        return chooseServer(server);\n      },\n      name: server.server_name,\n      adress: server.server_ip,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 42\n      }\n    });\n  })), !data && __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, \"Loading\"), error && __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"fel\"));\n}\n\n_s(Home, \"r2QYs02BSrn+Eu/1uMGZi8N+HnQ=\", false, function () {\n  return [useSWR];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/mnt/h/Code/Dose/Main Server/pages/index.js"],"names":["Head","Layout","style","useSWR","ServerBox","Router","cookie","fetcher","url","fetch","then","r","json","result","console","log","length","server","set","JSON","stringify","id","server_id","name","server_name","ip","server_ip","push","chooseServer","Home","process","env","NEXT_PUBLIC_SERVER_URL","get","data","error","servers","map","i"],"mappings":";;;;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,4BAAlB;AACA,OAAOC,MAAP,MAAmB,KAAnB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,MAAP,MAAmB,WAAnB,C,CAEA;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAC,GAAG;AAAA,SACjBC,KAAK,CAACD,GAAD,CAAL,CACGE,IADH,CACQ,UAAAC,CAAC,EAAI;AACT,WAAOA,CAAC,CAACC,IAAF,GAASF,IAAT,CAAc,UAAAG,MAAM,EAAI;AAC7BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAM,CAAC,SAAD,CAAN,CAAkBG,MAA9B;;AACA,UAAGH,MAAM,CAAC,SAAD,CAAN,CAAkBG,MAAlB,IAA4B,CAA/B,EAAkC;AAChC,eAAOH,MAAP;AACD,OAFD,MAEO;AACL,YAAII,MAAM,GAAGJ,MAAM,CAAC,SAAD,CAAN,CAAkB,CAAlB,CAAb;AACAP,QAAAA,MAAM,CAACY,GAAP,CAAW,QAAX,EAAqBC,IAAI,CAACC,SAAL,CAAe;AAClCC,UAAAA,EAAE,EAAEJ,MAAM,CAACK,SADuB;AAElCC,UAAAA,IAAI,EAAEN,MAAM,CAACO,WAFqB;AAGlCC,UAAAA,EAAE,EAAER,MAAM,CAACS;AAHuB,SAAf,CAArB;AAKArB,QAAAA,MAAM,CAACsB,IAAP,mBAAuBV,MAAM,CAACK,SAA9B;AACD;AACF,KAdM,CAAP;AAeD,GAjBH,CADiB;AAAA,CAAnB;;AAoBA,IAAMM,YAAY,GAAG,SAAfA,YAAe,CAAAX,MAAM,EAAI;AAC7BX,EAAAA,MAAM,CAACY,GAAP,CAAW,QAAX,EAAqBC,IAAI,CAACC,SAAL,CAAe;AAClCC,IAAAA,EAAE,EAAEJ,MAAM,CAACK,SADuB;AAElCC,IAAAA,IAAI,EAAEN,MAAM,CAACO,WAFqB;AAGlCC,IAAAA,EAAE,EAAER,MAAM,CAACS;AAHuB,GAAf,CAArB;AAKArB,EAAAA,MAAM,CAACsB,IAAP,mBAAuBV,MAAM,CAACK,SAA9B;AACD,CAPD;;AASA,eAAe,SAASO,IAAT,GAAgB;AAAA;;AAAA;;AAAA,gBACL1B,MAAM,WAAI2B,OAAO,CAACC,GAAR,CAAYC,sBAAhB,2CAAuE1B,MAAM,CAAC2B,GAAP,CAAW,OAAX,CAAvE,GAA8F1B,OAA9F,CADD;AAAA,MACrB2B,IADqB,WACrBA,IADqB;AAAA,MACfC,KADe,WACfA,KADe;;AAG7B,SACE,MAAC,MAAD;AAAQ,IAAA,IAAI,MAAZ;AAAa,IAAA,QAAQ,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAGGD,IAAI,IAAIA,IAAI,CAACE,OAAb,IACD;AAAK,IAAA,SAAS,EAAElC,KAAK,CAACkC,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,IAAI,CAACE,OAAL,CAAaC,GAAb,CAAiB,UAACpB,MAAD,EAASqB,CAAT;AAAA,WAAe,MAAC,SAAD;AAAW,MAAA,OAAO,EAAE;AAAA,eAAMV,YAAY,CAACX,MAAD,CAAlB;AAAA,OAApB;AAAgD,MAAA,IAAI,EAAEA,MAAM,CAACO,WAA7D;AAA0E,MAAA,MAAM,EAAEP,MAAM,CAACS,SAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAf;AAAA,GAAjB,CADH,CAJF,EAUG,CAACQ,IAAD,IACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAXF,EAcGC,KAAK,IACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAfF,CADF;AAoBD;;GAvBuBN,I;UACE1B,M;;;KADF0B,I","sourcesContent":["import Head from 'next/head'\nimport Layout from '../components/layout'\nimport style from '../styles/index.module.css';\nimport useSWR from 'swr';\nimport ServerBox from '../components/serverBox';\nimport Router from 'next/router';\nimport cookie from 'js-cookie';\n\n// Fetcher for useSWR, redirect to login if not authorized\nconst fetcher = url =>\n  fetch(url)\n    .then(r => {\n      return r.json().then(result => {\n        console.log(result)\n        console.log(result[\"servers\"].length)\n        if(result[\"servers\"].length != 1) {\n          return result;\n        } else {\n          let server = result[\"servers\"][0]\n          cookie.set('server', JSON.stringify({\n            id: server.server_id,\n            name: server.server_name,\n            ip: server.server_ip\n          }));\n          Router.push(`/server/${server.server_id}`);\n        }\n      });\n    }\n  );\nconst chooseServer = server => {\n  cookie.set('server', JSON.stringify({\n    id: server.server_id,\n    name: server.server_name,\n    ip: server.server_ip\n  }));\n  Router.push(`/server/${server.server_id}`);\n}\n\nexport default function Home() {\n  const { data, error } = useSWR(`${process.env.NEXT_PUBLIC_SERVER_URL}/api/servers/getServers?token=${cookie.get('token')}`, fetcher);\n\n  return (\n    <Layout home relative>\n      <Head>\n      </Head>\n      {data && data.servers &&\n      <div className={style.servers}>\n        {data.servers.map((server, i) => <ServerBox onClick={() => chooseServer(server)} name={server.server_name} adress={server.server_ip}></ServerBox>)}\n      </div>\n      }\n\n\n      {!data &&\n      <h1>Loading</h1>\n      }\n\n      {error &&\n      <h1>fel</h1>\n      }\n    </Layout>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}