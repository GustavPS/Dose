{"version":3,"sources":["../../../next-server/server/config.ts"],"names":["targets","reactModes","experimentalWarning","Log","warn","chalk","bold","console","assignDefaults","userConfig","exportTrailingSlash","yellow","trailingSlash","config","Object","keys","reduce","currentConfig","key","value","undefined","defaultConfig","Error","userDistDir","trim","length","Array","isArray","forEach","ext","constructor","c","k","v","result","assetPrefix","basePath","startsWith","endsWith","amp","canonicalBase","images","domains","invalid","filter","d","join","deviceSizes","imageSizes","loader","VALID_LOADERS","includes","path","imageConfigDefault","i18n","i18nType","locales","defaultLocaleType","defaultLocale","invalidDomainItems","item","domain","hasInvalidLocale","locale","domainItem","map","JSON","stringify","invalidLocales","String","localeDetectionType","localeDetection","loadConfig","phase","dir","customConfig","configOrigin","CONFIG_FILE","cwd","userConfigModule","require","default","target","slice","experimental","reactMode","hasNextSupport","process","env","NEXT_PRIVATE_TARGET","configFile","configBaseName","nonJsPath","findUp","sync","isTargetLikeServerless","isServerless","isServerlessTrace"],"mappings":"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","sourcesContent":["import chalk from 'chalk'\nimport findUp from 'next/dist/compiled/find-up'\nimport { basename, extname } from 'path'\nimport * as Log from '../../build/output/log'\nimport { hasNextSupport } from '../../telemetry/ci-info'\nimport { CONFIG_FILE } from '../lib/constants'\nimport { execOnce } from '../lib/utils'\nimport { defaultConfig, normalizeConfig } from './config-shared'\nimport { loadWebpackHook } from './config-utils'\nimport { ImageConfig, imageConfigDefault, VALID_LOADERS } from './image-config'\n\nexport { DomainLocales, NextConfig, normalizeConfig } from './config-shared'\n\nconst targets = ['server', 'serverless', 'experimental-serverless-trace']\nconst reactModes = ['legacy', 'blocking', 'concurrent']\n\nconst experimentalWarning = execOnce(() => {\n  Log.warn(chalk.bold('You have enabled experimental feature(s).'))\n  Log.warn(\n    `Experimental features are not covered by semver, and may cause unexpected or broken application behavior. ` +\n      `Use them at your own risk.`\n  )\n  console.warn()\n})\n\nfunction assignDefaults(userConfig: { [key: string]: any }) {\n  if (typeof userConfig.exportTrailingSlash !== 'undefined') {\n    console.warn(\n      chalk.yellow.bold('Warning: ') +\n        'The \"exportTrailingSlash\" option has been renamed to \"trailingSlash\". Please update your next.config.js.'\n    )\n    if (typeof userConfig.trailingSlash === 'undefined') {\n      userConfig.trailingSlash = userConfig.exportTrailingSlash\n    }\n    delete userConfig.exportTrailingSlash\n  }\n\n  const config = Object.keys(userConfig).reduce<{ [key: string]: any }>(\n    (currentConfig, key) => {\n      const value = userConfig[key]\n\n      if (value === undefined || value === null) {\n        return currentConfig\n      }\n\n      if (key === 'experimental' && value && value !== defaultConfig[key]) {\n        experimentalWarning()\n      }\n\n      if (key === 'distDir') {\n        if (typeof value !== 'string') {\n          throw new Error(\n            `Specified distDir is not a string, found type \"${typeof value}\"`\n          )\n        }\n        const userDistDir = value.trim()\n\n        // don't allow public as the distDir as this is a reserved folder for\n        // public files\n        if (userDistDir === 'public') {\n          throw new Error(\n            `The 'public' directory is reserved in Next.js and can not be set as the 'distDir'. https://err.sh/vercel/next.js/can-not-output-to-public`\n          )\n        }\n        // make sure distDir isn't an empty string as it can result in the provided\n        // directory being deleted in development mode\n        if (userDistDir.length === 0) {\n          throw new Error(\n            `Invalid distDir provided, distDir can not be an empty string. Please remove this config or set it to undefined`\n          )\n        }\n      }\n\n      if (key === 'pageExtensions') {\n        if (!Array.isArray(value)) {\n          throw new Error(\n            `Specified pageExtensions is not an array of strings, found \"${value}\". Please update this config or remove it.`\n          )\n        }\n\n        if (!value.length) {\n          throw new Error(\n            `Specified pageExtensions is an empty array. Please update it with the relevant extensions or remove it.`\n          )\n        }\n\n        value.forEach((ext) => {\n          if (typeof ext !== 'string') {\n            throw new Error(\n              `Specified pageExtensions is not an array of strings, found \"${ext}\" of type \"${typeof ext}\". Please update this config or remove it.`\n            )\n          }\n        })\n      }\n\n      if (!!value && value.constructor === Object) {\n        currentConfig[key] = {\n          ...defaultConfig[key],\n          ...Object.keys(value).reduce<any>((c, k) => {\n            const v = value[k]\n            if (v !== undefined && v !== null) {\n              c[k] = v\n            }\n            return c\n          }, {}),\n        }\n      } else {\n        currentConfig[key] = value\n      }\n\n      return currentConfig\n    },\n    {}\n  )\n\n  const result = { ...defaultConfig, ...config }\n\n  if (typeof result.assetPrefix !== 'string') {\n    throw new Error(\n      `Specified assetPrefix is not a string, found type \"${typeof result.assetPrefix}\" https://err.sh/vercel/next.js/invalid-assetprefix`\n    )\n  }\n\n  if (typeof result.basePath !== 'string') {\n    throw new Error(\n      `Specified basePath is not a string, found type \"${typeof result.basePath}\"`\n    )\n  }\n\n  if (result.basePath !== '') {\n    if (result.basePath === '/') {\n      throw new Error(\n        `Specified basePath /. basePath has to be either an empty string or a path prefix\"`\n      )\n    }\n\n    if (!result.basePath.startsWith('/')) {\n      throw new Error(\n        `Specified basePath has to start with a /, found \"${result.basePath}\"`\n      )\n    }\n\n    if (result.basePath !== '/') {\n      if (result.basePath.endsWith('/')) {\n        throw new Error(\n          `Specified basePath should not end with /, found \"${result.basePath}\"`\n        )\n      }\n\n      if (result.assetPrefix === '') {\n        result.assetPrefix = result.basePath\n      }\n\n      if (result.amp.canonicalBase === '') {\n        result.amp.canonicalBase = result.basePath\n      }\n    }\n  }\n\n  if (result?.images) {\n    const images: Partial<ImageConfig> = result.images\n\n    if (typeof images !== 'object') {\n      throw new Error(\n        `Specified images should be an object received ${typeof images}.\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n      )\n    }\n\n    if (images.domains) {\n      if (!Array.isArray(images.domains)) {\n        throw new Error(\n          `Specified images.domains should be an Array received ${typeof images.domains}.\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n\n      if (images.domains.length > 50) {\n        throw new Error(\n          `Specified images.domains exceeds length of 50, received length (${images.domains.length}), please reduce the length of the array to continue.\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n\n      const invalid = images.domains.filter(\n        (d: unknown) => typeof d !== 'string'\n      )\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.domains should be an Array of strings received invalid values (${invalid.join(\n            ', '\n          )}).\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n    }\n    if (images.deviceSizes) {\n      const { deviceSizes } = images\n      if (!Array.isArray(deviceSizes)) {\n        throw new Error(\n          `Specified images.deviceSizes should be an Array received ${typeof deviceSizes}.\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n\n      if (deviceSizes.length > 25) {\n        throw new Error(\n          `Specified images.deviceSizes exceeds length of 25, received length (${deviceSizes.length}), please reduce the length of the array to continue.\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n\n      const invalid = deviceSizes.filter((d: unknown) => {\n        return typeof d !== 'number' || d < 1 || d > 10000\n      })\n\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.deviceSizes should be an Array of numbers that are between 1 and 10000, received invalid values (${invalid.join(\n            ', '\n          )}).\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n    }\n    if (images.imageSizes) {\n      const { imageSizes } = images\n      if (!Array.isArray(imageSizes)) {\n        throw new Error(\n          `Specified images.imageSizes should be an Array received ${typeof imageSizes}.\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n\n      if (imageSizes.length > 25) {\n        throw new Error(\n          `Specified images.imageSizes exceeds length of 25, received length (${imageSizes.length}), please reduce the length of the array to continue.\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n\n      const invalid = imageSizes.filter((d: unknown) => {\n        return typeof d !== 'number' || d < 1 || d > 10000\n      })\n\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.imageSizes should be an Array of numbers that are between 1 and 10000, received invalid values (${invalid.join(\n            ', '\n          )}).\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n        )\n      }\n    }\n\n    if (!images.loader) {\n      images.loader = 'default'\n    }\n\n    if (!VALID_LOADERS.includes(images.loader)) {\n      throw new Error(\n        `Specified images.loader should be one of (${VALID_LOADERS.join(\n          ', '\n        )}), received invalid value (${\n          images.loader\n        }).\\nSee more info here: https://err.sh/next.js/invalid-images-config`\n      )\n    }\n\n    // Append trailing slash for non-default loaders\n    if (images.path) {\n      if (\n        images.loader !== 'default' &&\n        images.path[images.path.length - 1] !== '/'\n      ) {\n        images.path += '/'\n      }\n    }\n\n    if (images.path === imageConfigDefault.path && result.basePath) {\n      images.path = `${result.basePath}${images.path}`\n    }\n  }\n\n  if (result.i18n) {\n    const { i18n } = result\n    const i18nType = typeof i18n\n\n    if (i18nType !== 'object') {\n      throw new Error(\n        `Specified i18n should be an object received ${i18nType}.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n      )\n    }\n\n    if (!Array.isArray(i18n.locales)) {\n      throw new Error(\n        `Specified i18n.locales should be an Array received ${typeof i18n.locales}.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n      )\n    }\n\n    const defaultLocaleType = typeof i18n.defaultLocale\n\n    if (!i18n.defaultLocale || defaultLocaleType !== 'string') {\n      throw new Error(\n        `Specified i18n.defaultLocale should be a string.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n      )\n    }\n\n    if (typeof i18n.domains !== 'undefined' && !Array.isArray(i18n.domains)) {\n      throw new Error(\n        `Specified i18n.domains must be an array of domain objects e.g. [ { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] } ] received ${typeof i18n.domains}.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n      )\n    }\n\n    if (i18n.domains) {\n      const invalidDomainItems = i18n.domains.filter((item) => {\n        if (!item || typeof item !== 'object') return true\n        if (!item.defaultLocale) return true\n        if (!item.domain || typeof item.domain !== 'string') return true\n\n        let hasInvalidLocale = false\n\n        if (Array.isArray(item.locales)) {\n          for (const locale of item.locales) {\n            if (typeof locale !== 'string') hasInvalidLocale = true\n\n            for (const domainItem of i18n.domains || []) {\n              if (domainItem === item) continue\n              if (domainItem.locales && domainItem.locales.includes(locale)) {\n                console.warn(\n                  `Both ${item.domain} and ${domainItem.domain} configured the locale (${locale}) but only one can. Remove it from one i18n.domains config to continue`\n                )\n                hasInvalidLocale = true\n                break\n              }\n            }\n          }\n        }\n\n        return hasInvalidLocale\n      })\n\n      if (invalidDomainItems.length > 0) {\n        throw new Error(\n          `Invalid i18n.domains values:\\n${invalidDomainItems\n            .map((item: any) => JSON.stringify(item))\n            .join(\n              '\\n'\n            )}\\n\\ndomains value must follow format { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] }.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n        )\n      }\n    }\n\n    if (!Array.isArray(i18n.locales)) {\n      throw new Error(\n        `Specified i18n.locales must be an array of locale strings e.g. [\"en-US\", \"nl-NL\"] received ${typeof i18n.locales}.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n      )\n    }\n\n    const invalidLocales = i18n.locales.filter(\n      (locale: any) => typeof locale !== 'string'\n    )\n\n    if (invalidLocales.length > 0) {\n      throw new Error(\n        `Specified i18n.locales contains invalid values (${invalidLocales\n          .map(String)\n          .join(\n            ', '\n          )}), locales must be valid locale tags provided as strings e.g. \"en-US\".\\n` +\n          `See here for list of valid language sub-tags: http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry`\n      )\n    }\n\n    if (!i18n.locales.includes(i18n.defaultLocale)) {\n      throw new Error(\n        `Specified i18n.defaultLocale should be included in i18n.locales.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n      )\n    }\n\n    // make sure default Locale is at the front\n    i18n.locales = [\n      i18n.defaultLocale,\n      ...i18n.locales.filter((locale) => locale !== i18n.defaultLocale),\n    ]\n\n    const localeDetectionType = typeof i18n.localeDetection\n\n    if (\n      localeDetectionType !== 'boolean' &&\n      localeDetectionType !== 'undefined'\n    ) {\n      throw new Error(\n        `Specified i18n.localeDetection should be undefined or a boolean received ${localeDetectionType}.\\nSee more info here: https://err.sh/next.js/invalid-i18n-config`\n      )\n    }\n  }\n\n  return result\n}\n\nexport default async function loadConfig(\n  phase: string,\n  dir: string,\n  customConfig?: object | null\n) {\n  await loadWebpackHook(phase, dir)\n\n  if (customConfig) {\n    return assignDefaults({ configOrigin: 'server', ...customConfig })\n  }\n\n  const path = await findUp(CONFIG_FILE, { cwd: dir })\n\n  // If config file was found\n  if (path?.length) {\n    const userConfigModule = require(path)\n    const userConfig = normalizeConfig(\n      phase,\n      userConfigModule.default || userConfigModule\n    )\n\n    if (Object.keys(userConfig).length === 0) {\n      Log.warn(\n        'Detected next.config.js, no exported configuration found. https://err.sh/vercel/next.js/empty-configuration'\n      )\n    }\n\n    if (userConfig.target && !targets.includes(userConfig.target)) {\n      throw new Error(\n        `Specified target is invalid. Provided: \"${\n          userConfig.target\n        }\" should be one of ${targets.join(', ')}`\n      )\n    }\n\n    if (userConfig.amp?.canonicalBase) {\n      const { canonicalBase } = userConfig.amp || ({} as any)\n      userConfig.amp = userConfig.amp || {}\n      userConfig.amp.canonicalBase =\n        (canonicalBase.endsWith('/')\n          ? canonicalBase.slice(0, -1)\n          : canonicalBase) || ''\n    }\n\n    if (\n      userConfig.experimental?.reactMode &&\n      !reactModes.includes(userConfig.experimental.reactMode)\n    ) {\n      throw new Error(\n        `Specified React Mode is invalid. Provided: ${\n          userConfig.experimental.reactMode\n        } should be one of ${reactModes.join(', ')}`\n      )\n    }\n\n    if (hasNextSupport) {\n      userConfig.target = process.env.NEXT_PRIVATE_TARGET || 'server'\n    }\n\n    return assignDefaults({\n      configOrigin: CONFIG_FILE,\n      configFile: path,\n      ...userConfig,\n    })\n  } else {\n    const configBaseName = basename(CONFIG_FILE, extname(CONFIG_FILE))\n    const nonJsPath = findUp.sync(\n      [\n        `${configBaseName}.jsx`,\n        `${configBaseName}.ts`,\n        `${configBaseName}.tsx`,\n        `${configBaseName}.json`,\n      ],\n      { cwd: dir }\n    )\n    if (nonJsPath?.length) {\n      throw new Error(\n        `Configuring Next.js via '${basename(\n          nonJsPath\n        )}' is not supported. Please replace the file with 'next.config.js'.`\n      )\n    }\n  }\n\n  return defaultConfig\n}\n\nexport function isTargetLikeServerless(target: string) {\n  const isServerless = target === 'serverless'\n  const isServerlessTrace = target === 'experimental-serverless-trace'\n  return isServerless || isServerlessTrace\n}\n"]}